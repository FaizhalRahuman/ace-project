<html>
<head>
	<style>
        body{
        }
	.form{
        background-color:white;
		/*border:2px solid black;*/
		border-radius:9px;
		width: 100%;
		height:95%;
	}
	#outerdiv{
		padding: 15PX;
	}
	.indiv{
		padding:20px;
        height: 20px;
	}
    label{
        font-size: 1.5rem;
        font-weight: bold;
    }
	input{
		padding-left: 10px;
        width: 250px;
        height:30px;
	}
	button{
		border:1px solid black;
		border-radius:6px;
		background-color:lightgreen;
		color: black;
        font-size: 1rem;
		font-weight:bolder;
		margin-top: 20px;
        margin-left: 395px;
        height: 40px;
	}
	button:hover{
		background-color: darkgreen;
        color:white;
	}

</style>
</head>
	<body>
		<form id="addempform" action="/users/submit" method="post" class="form">
			<div id="outerdiv">
			<div class="indiv">
				<label>Emp name:</label>
				<input type="text" name="name" style="margin-left: 85px;"/>
			</div>
			<div class="indiv">
				<label>Emp id:</label>
				<input type="text" name="id" style="margin-left: 121px;"/>
			</div>
			<div class="indiv">
				<label>Emp Phno:</label>
				<input type="text" name="phone" placeholder="enter mobile number" style="margin-left: 89px;"/>
			</div>
			<div class="indiv">
				<label>Emp address:</label>
				<input type="text" name="address" style="margin-left: 64px;"/>
			</div>
			<div class="indiv">
				<label>Emp role:</label>
				<input type="text" name="role" placeholder="enter role.." style="margin-left: 103px;"/>
			</div>
			<div class="indiv">
				<label>Salary:</label>
				<input type="text" name="salary" style="margin-left: 131px;"/>
			</div>
			<div class="indiv">
				<label>Years of experience:</label>
				<input type="text" name="exp" placeholder="experience in domain.."/>
			</div>
			<div id="btn">
				<button type="submit">Click to add</button>
			</div>
		</div>
		</form>
		
		<script>
			fetch('/users/submit')
			.then(response => response.text())
			.then(data => console.log(data))
			.catch(error => console.error('Error:', error));
			
			document.getElementById('addempform').addEventListener('submit',async function(event) {
				event.preventDefault();

				const form = event.target;//refers to element that trigger the event(submit event is triggered by element <form>.so the element <form> is stored in the variable form)
				console.log(form);
				const formData = new FormData(form);
				console.log(formData);
				try{
				const response = await fetch(form.action, {
					method : form.method,//form(<form>).action('/users/submit')
					body : new URLSearchParams(formData),//convert form data to URL-encoded string||why?->: Your backend expects the data in a specific format (typically URL-encoded or JSON). If the data isnâ€™t formatted correctly, it might not be processed as expected.

				});

				console.log('Response Status:', response.status); // Log the response status
				const responseBody = await response.text(); // Read the response body as text
				console.log('Response Body:', responseBody); // Log the response body

				if(response.ok) {
					alert('Employee added successfully');
					console.log('Response OK:', response.ok);
					form.reset();
					console.log('Form reset');
				}else{
					alert('error while adding employee');
				}
				}catch(err){
					console.error('fetch error:',err);
				}

			});
		</script> 
	</body>
</html>